<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Pose Me!</title>

        <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
        <!--<script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>-->
        <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
        <script src="https://unpkg.com/aframe-render-order-component@1.1.0/dist/aframe-render-order-component.min.js"></script>
        <script src="./js/lookAt.js"></script>
        <!--<script src="./js/setColor.js"></script>-->
        <!--<script src="./js/colorChange.js"></script>-->
        
        <script src="./js/poseMe.js"></script>
        <script src="./js/targetCircles.js"></script>
        <link rel="stylesheet" href="./styles/style.css">
    </head>
    <body>
        <div id="instructions">
            Lock your phone in landscape mode.<br>
            Rotate your bubble to match the falling bubbles<br>
            Don't let the bubbles hit the ground. 3 lives and you're out!
<br>
            <button id="startButton">Start</button>
        </div>
        <a-scene
            id="game"
            pose-me
            cursor="rayOrigin:mouse"
            render-order="cursor, bubbles, hitbox">
            <a-assets>
                <img src="./assets/bubblePerson.png" id="bubble" />
                <img src="./assets/bubblePx.png" id="bubbleCursor" />
            </a-assets>

            <a-entity
                id="refresh-button"
                geometry="primitive: box"
                material="color: red"
                position="0 0 -2"></a-entity>
            <a-plane
                position="2 0.80503 -3.92"
                rotation="0 0 0"
                color="#6495ED"
                look-at></a-plane>
            <a-plane
                position="3 0.80503 -3.92"
                rotation="0 0 0"
                color="#6495ED"
                look-at></a-plane>
            <a-plane
                position="4 0.80503 -3.92"
                rotation="0 0 0"
                color="#6495ED"
                look-at></a-plane>
            <a-plane
                position="5 0.80503 -3.92"
                rotation="0 0 0"
                color="#6495ED"
                look-at></a-plane>
            <a-plane
                set-color="#008899"
                position="0 0 0"
                color="#802020"
                rotation="-90 0 0"
                scale="50 50 1"></a-plane>
            
            <a-sky color="#202030"></a-sky>

            <a-camera
                position="0 1.5 0"
                id="cam"
                mouse-cursor
                wasd-controls-enabled="true"
                renderer="sortObjects: true; sortTransparentObjects: true">
                <a-cursor>
                    <a-text
                        id="score"  
                        value="Score: "
                        position="0 -0.51 -1"
                        align="center"
                        color="#33C3F0"
                        negate="false"></a-text>
                    <a-circle
                        src="#bubble"
                        transparent="true"
                        material="shader: flat"
                        radius=".5"
                        scale="5.5 5.5 1"
                        position="0 0 -13.5"
                        render-order="cursor">
                    </a-circle>
                </a-cursor>
            </a-camera>
        </a-scene>

        <script>
            //Code for instruction screen
            let game = document.querySelector("#game");
            game.hidden = true;

            let startBtn = document.querySelector("#startButton");
            startBtn.addEventListener("click", startGame);

            function startGame(e) {
                //code to start game
                let instructions = document.querySelector("#instructions");
                instructions.hidden = true;
                game.hidden = false;
                let gameCode = document.querySelector("a-scene").components["pose-me"];
                console.log(gameCode);
                gameCode.startGame();
            }
        </script>
    </body>
</html>
